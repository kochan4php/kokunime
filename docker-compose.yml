version: "3.8"

services:
    kokunime:
        container_name: web
        build:
            context: .
            dockerfile: ./dockerfiles/production/Dockerfile
        image: kokunime:latest
        restart: always
        ports:
            - 4000:3000
        env_file: .env
        environment:
            NEXT_PUBLIC_KUSONIME_API: "https://brick-red-cricket-gown.cyclic.app/api"
        deploy:
            resources:
                limits:
                    cpus: '0.5'
                    memory: 512M
